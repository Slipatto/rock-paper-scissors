<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock - Paper - Scissors</title>
</head>

<body>
    <!-- PSEUDOCODE
    Welcome to player to the game, ask for an input (Rock, Paper or Scissors)
    Have Player 2 (Computer) Choose Rock, Paper or Scissors Randomly
    Compare Player1 input to Player 2 random choice to determine winner
    Return a string declaring winner or loser
    Compare player 1 wins to player 2 wins - first to 3 wins is the champion -->

    <!-- PSUEDOCODE#2
    Create a button for each selection (rock, paper, scissors)
    Add event listeners to each - should call playRound with the correct   
    playerSelection for each button
    Add a div to display results 
    change console.logs into DOM methods
    Display the running score. announce a winner of the game once someone
    reaches 5 points -->

    <h1>Please select a choice:</h1>
        <!-- Buttons for player selection -->
    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id="scissors">Scissors</button>
        <!-- Text items to show results -->
    <div id="roundBoard">
        <p id="player1">You have not selected a choice</p>
    </div>
    <div id="runningScore"></div>

<script>
// Function for the computers choice in the game
function getComputerChoice() {
    const gameChoice = ['rock', 'paper', 'scissors']
    let computerChoice = gameChoice[Math.floor(Math.random() * gameChoice.length)];
    return computerChoice;
}

// Function for comparing the players choice to computers choice
function playRound(input) {
    player2 = getComputerChoice()
    if (input === player2) {
    outcome = 'Tie!';
    } else if (input === 'rock' && player2 === 'paper') {
    outcome = `You Lose! ${player2} beats ${input}`;
    } else if (input === 'rock' && player2 === 'scissors') {
    outcome = `You Win! ${input} beats ${player2}`;
    } else if (input === 'paper' && player2 === 'scissors') {
    outcome = `You Lose! ${player2} beats ${input}`;
    } else if (input === 'paper' && player2 === 'rock') {
    outcome = `You Win! ${input} beats ${player2}`;
    } else if (input === 'scissors' && player2 === 'rock') {
    outcome = `You Lose! ${player2} beats ${input}`;
    } else if (input === 'scissors' && player2 === 'paper') {
    outcome = `You Win! ${input} beats ${player2}`;
    }
    return {outcome, player2};
    }
  
// Function for validating and acquiring player ones choice
// Player ones choice no longer needs to be validated
// function playerChoice() {
//     // Ask the player for input, convert to lowercase
//     let stop = false;
//     let choice;

    // Use a loop to to ensure that the player is inputting the correct selection
//     do {
//         choice = prompt("Welcome to Rock, Paper, Scissors, please choose a play (Rock, Paper or Scissors)");
            
//         if (choice.toLowerCase() === 'rock' || choice.toLowerCase() === 'paper' || choice.toLowerCase() === 'scissors') {
//             stop = true;
//         } else {
//             stop = false;
//         }
//     } while (!stop);
//     return choice;
// }

// Function to play the game, loops until one player reaches 3 wins (No longer needed)
// function playGame() {
//     let playercount = 0
//     let computercount = 0
//     do {
//         let player1 = playerChoice()
//         // This needs to be changed to reference the button chosen
//         let computer = getComputerChoice()
//         let game = playRound(player1)
//         alert(game)
//         if (game.includes('Win')) {
//             playercount += 1;
//         } else if (game.includes('Lose')) {
//             computercount += 1; 
//         }
//         }
//     while (playercount != 3 && computercount != 3);
// }

function checkScore(outcome) {
    if (outcome.includes('Win')) {
            playercount += 1;
        } else if (outcome.includes('Lose')) {
            computercount += 1; 
    }
    return {playercount, computercount}; 
}

function checkGame(playercount, computercount) {
    if (playercount === 5) {
        endGame = 'You win!';
    } else if (computercount === 5) {
        endGame = 'You lose!';
    }
    return endGame;
}

// Call the function to play the game (no longer necessary)
// playGame()

// Declare variables and link to html items
const rock = document.querySelector('#rock');
const paper = document.querySelector('#paper');
const scissors = document.querySelector('#scissors');
const player1 = document.querySelector('#player1');
const roundBoard = document.querySelector('#roundBoard');
const runningScore = document.querySelector('#runningScore');
let outcome;
let player2;
let endGame = '';
let playercount = 0;
let computercount = 0;

// Add event listeners for html buttons
rock.addEventListener('click', () =>  {
    roundBoard.textContent = '';
    let input = 'rock';
    let { outcome, player2 } = playRound(input);
    player1.textContent = 'You have selected Rock!';

    let computer = document.createElement('p');
    computer.textContent = `Computer has selected ${player2}`;
    roundBoard.appendChild(computer);

    let result = document.createElement('p');
    result.textContent = outcome;
    roundBoard.appendChild(result);

    checkScore(outcome);
    checkGame(playercount, computercount);

    runningScore.textContent = `You currently have ${playercount} wins and ${computercount} losses. ${endGame}`;
    roundBoard.appendChild(runningScore);
})

paper.addEventListener('click', () =>  {
    roundBoard.textContent = '';
    let input = 'paper';
    playRound(input);
    player1.textContent = 'You have selected Paper!'

    let computer = document.createElement('p');
    computer.textContent = `Computer has selected ${player2}`;
    roundBoard.appendChild(computer);

    let result = document.createElement('p');
    result.textContent = outcome;
    roundBoard.appendChild(result);

    checkScore(outcome);
    checkGame(playercount, computercount);
    runningScore.textContent = `You currently have ${playercount} wins and ${computercount} losses. ${endGame}`;
    roundBoard.appendChild(runningScore);
})

scissors.addEventListener('click', () =>  {
    roundBoard.textContent = '';
    let input = 'scissors';
    playRound(input);
    player1.textContent = 'You have selected Scissors!'

    let computer = document.createElement('p');
    computer.textContent = `Computer has selected ${player2}`;
    roundBoard.appendChild(computer);

    let result = document.createElement('p');
    result.textContent = outcome;
    roundBoard.appendChild(result);

    checkScore(outcome);
    checkGame(playercount, computercount);

    runningScore.textContent = `You currently have ${playercount} wins and ${computercount} losses. ${endGame}`;
    roundBoard.appendChild(runningScore);
})




</script>

</body>

</html>